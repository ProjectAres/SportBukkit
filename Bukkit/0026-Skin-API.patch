From 551d35bfd87061c34440ebe1732c4336c0ff07e1 Mon Sep 17 00:00:00 2001
From: Jedediah Smith <jedediah@silencegreys.com>
Date: Sun, 20 Apr 2014 19:03:10 -0400
Subject: [PATCH] Skin API


diff --git a/src/main/java/org/bukkit/Bukkit.java b/src/main/java/org/bukkit/Bukkit.java
index 2ed3eaa..b1a211a 100644
--- a/src/main/java/org/bukkit/Bukkit.java
+++ b/src/main/java/org/bukkit/Bukkit.java
@@ -754,6 +754,13 @@ public final class Bukkit {
     }
 
     /**
+     * Create a {@link Skin} from base64 encoded raw data
+     */
+    public static Skin createSkin(String value, String signature) {
+        return server.createSkin(value, signature);
+    }
+
+    /**
      * @see Server#getUnsafe()
      */
     @Deprecated
diff --git a/src/main/java/org/bukkit/Server.java b/src/main/java/org/bukkit/Server.java
index 2452a57..ff05727 100644
--- a/src/main/java/org/bukkit/Server.java
+++ b/src/main/java/org/bukkit/Server.java
@@ -887,6 +887,11 @@ public interface Server extends PluginMessageRecipient {
     public int getIdleTimeout();
 
     /**
+     * Create a {@link Skin} from base64 encoded raw data
+     */
+    public Skin createSkin(String value, String signature);
+
+    /**
      * @see UnsafeValues
      */
     @Deprecated
diff --git a/src/main/java/org/bukkit/Skin.java b/src/main/java/org/bukkit/Skin.java
new file mode 100644
index 0000000..c1343fd
--- /dev/null
+++ b/src/main/java/org/bukkit/Skin.java
@@ -0,0 +1,7 @@
+package org.bukkit;
+
+/**
+ * A skin reference on the server
+ */
+public interface Skin {
+}
diff --git a/src/main/java/org/bukkit/entity/Player.java b/src/main/java/org/bukkit/entity/Player.java
index c4cd0d7..39bc8f2 100644
--- a/src/main/java/org/bukkit/entity/Player.java
+++ b/src/main/java/org/bukkit/entity/Player.java
@@ -11,6 +11,7 @@ import org.bukkit.Location;
 import org.bukkit.Material;
 import org.bukkit.Note;
 import org.bukkit.OfflinePlayer;
+import org.bukkit.Skin;
 import org.bukkit.Sound;
 import org.bukkit.Statistic;
 import org.bukkit.WeatherType;
@@ -145,6 +146,61 @@ public interface Player extends HumanEntity, Conversable, CommandSender, Offline
     public boolean getPlayerListUpdates();
 
     /**
+     * Test if this Player has a fake name set for the given viewer
+     */
+    public boolean hasFakeSkin(CommandSender viewer);
+
+    /**
+     * Return the {@link Skin} that the given viewer sees on this player,
+     * or null if the viewer can see this player's default skin.
+     */
+    public Skin getFakeSkin(CommandSender viewer);
+
+    /**
+     * Return this player's default {@link org.bukkit.Skin}
+     */
+    public Skin getSkin();
+
+    /**
+     * Return the {@link Skin} that the given viewer sees on this player,
+     * which may be either their default skin or a fake skin.
+     */
+    public Skin getSkin(CommandSender viewer);
+
+    /**
+     * Set the {@link Skin} that the given viewer will see on this player.
+     * If null is given for the skin, any existing fake skin will be cleared and the
+     * viewer will see this player's default skin.
+     */
+    public void setFakeSkin(CommandSender viewer, Skin newSkin);
+
+    /**
+     * Clear any fake {@link org.bukkit.Skin}s set on this player, so that all other
+     * players will see this player's default skin.
+     */
+    public void clearFakeSkins();
+
+    /**
+     * Set this player's default {@link Skin}, which will be visible to
+     * all players who do not have a fake skin set.
+     */
+    public void setSkin(Skin newSkin);
+
+    /**
+     * Simultaneously set this player's fake name and {@link Skin} for the given viewer.
+     * This method only refreshes the player entity once, whereas calling
+     * {@link #setFakeName} and {@link #setFakeSkin} seperately would refresh it twice.
+     */
+    public void setFakeNameAndSkin(CommandSender viewer, String name, Skin skin);
+
+    /**
+     * Simultaneously clear any fake names or {@link Skin}s set on this player.
+     * This method only refreshes the player entity once, whereas calling
+     * {@link #clearFakeNames} and {@link #clearFakeSkins} seperately would refresh it twice.
+     */
+    public void clearFakeNamesAndSkins();
+
+    /**
      * Set the target of the player's compass.
      *
      * @param loc Location to point to
-- 
1.8.5.2 (Apple Git-48)

