From 191fb450f853d8fe536e84c99c217669f1e40cf6 Mon Sep 17 00:00:00 2001
From: Joshua Baldwin <wiikdworld@googlemail.com>
Date: Tue, 9 Jul 2013 23:17:36 +0100
Subject: [PATCH] Possible fix for Nope kick message

---
 src/main/java/net/minecraft/server/PlayerConnection.java | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java
index ff685d5..545b35c 100644
--- a/src/main/java/net/minecraft/server/PlayerConnection.java
+++ b/src/main/java/net/minecraft/server/PlayerConnection.java
@@ -254,7 +254,10 @@ public class PlayerConnection extends Connection {
             if (Double.isNaN(packet10flying.x) || Double.isNaN(packet10flying.y) || Double.isNaN(packet10flying.z) || Double.isNaN(packet10flying.stance)) {
                 player.teleport(player.getWorld().getSpawnLocation(), PlayerTeleportEvent.TeleportCause.UNKNOWN);
                 System.err.println(player.getName() + " was caught trying to crash the server with an invalid position.");
+                this.player.playerConnection.sendPacket(new Packet13PlayerLookMove(from.getX(), from.getY() + 1.6200000047683716D, from.getY(), from.getZ(), from.getYaw(), from.getPitch(), false));
+                /* Depreceated
                 player.kickPlayer("Nope!");
+                */
                 return;
             }
 
-- 
1.7.12.4 (Apple Git-37)

