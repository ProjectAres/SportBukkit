From dd71fdd4c4a85c81f0805bc19962cdb9e5013336 Mon Sep 17 00:00:00 2001
From: ShinyDialga45 <shinydialga45@gmail.com>
Date: Tue, 2 Dec 2014 21:25:10 -0600
Subject: [PATCH] Fix leash interaction bugs


diff --git a/src/main/java/net/minecraft/server/PlayerInteractManager.java b/src/main/java/net/minecraft/server/PlayerInteractManager.java
index 325b87e..b0bd5ed 100644
--- a/src/main/java/net/minecraft/server/PlayerInteractManager.java
+++ b/src/main/java/net/minecraft/server/PlayerInteractManager.java
@@ -397,6 +397,22 @@ public class PlayerInteractManager {
                 result = (event.useItemInHand() != Event.Result.ALLOW);
             } else if (!entityhuman.isSneaking() || itemstack == null) {
                 result = block.interact(world, i, j, k, entityhuman, l, f, f1, f2);
+                //Checks if the player has a leash attached, if not it sees if they are holding an item that will cause a visual glitch.
+                try {
+                    Item heldItem = entityhuman.be().getItem();
+                    if (heldItem == Items.LEASH && this.world.isStatic) {
+                        result = false;
+                    } else if (block == Blocks.FENCE || block == Blocks.NETHER_FENCE) {
+                        if (heldItem instanceof ItemFood
+                                || heldItem instanceof ItemSeedFood
+                                || heldItem instanceof ItemSword
+                                || heldItem instanceof ItemBow) {
+                            return result;
+                        }
+                    }
+                } catch (NullPointerException e) {
+                    //If heldItem is the player's arm or null, continue on.
+                }
             }
 
             if (itemstack != null && !result) {
-- 
1.9.4.msysgit.2

